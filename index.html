<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Máquina de Mealy</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald" rel="stylesheet">
</head>
<style>
    body{
        text-align: center;
        font-family: Oswald;
    }
    .fil0 {fill:white}
    .fil1 {fill:blue}
    .fil2 {fill:red}
    .margin{margin: 10px;}
    .passBtn {background: yellow; color: black; font-size: large;}
    .confirmBtn {background: green; color: white; font-size: large;}
    .clearBtn {background: gray; color: white; font-size: large;}
    .border {border: 1px solid; width:80vh; margin: auto; margin-top: 10px;}
</style>
<body>
    <h1>Máquina de Mealy</h1>
    <p>Formador de Cores em RGB</p>
    <div class="margin border"> 
        <h2 style="text-align: left; margin-left: 5px;">Entrada:</h2>
        <p>Σ = {0,1}</p>
        <div>
            <strong>Fita 1:</strong>
            <input minlength="3" maxlength="3" class="margin" type="text" id="e0">
        </div>
            
        <div>
            <strong>Fita 2:</strong>
            <input minlength="3" maxlength="3" class="margin" type="text" id="e1">
        </div>
        <div>
            <strong>Fita 3:</strong>
            <input minlength="3" maxlength="3" class="margin" type="text" id="e2">
        </div>
        <div>
            <button onclick="limpar()" class="margin clearBtn">Limpar</button>
            <button onclick="salvar()" class="margin confirmBtn">Guardar</button>
        </div>
    </div>
    <div class="margin border">
        <h2 style="text-align: left; margin-left: 5px;">Imagem da UPE:</h2>
        <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
    <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="50mm" height="50mm" version="1.1"
        style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
        viewBox="0 0 12700 12700" xmlns:xlink="http://www.w3.org/1999/xlink"
        xmlns:xodm="http://www.corel.com/coreldraw/odm/2003">
        <g id="Camada_x0020_1">
            <metadata id="CorelCorpID_0Corel-Layer" />
            <rect class="fil0 str0" width="12700" height="12700" />
            <g id="_1788157170208">
                <g>
                    <path class="fil1"
                        d="M8450.7 3176.26l2361.41 0 0 850.11 -1549.08 0 0 812.33 1303.5 0 0 510.06 -1303.5 0 0 774.54 1549.08 0 0 812.33 -2777.01 0c-43.53,0 -56.68,-13.14 -56.68,-56.68l0 -1246.82c196.19,0 290.71,-2.02 495.8,-184.29 195.05,-173.35 320,-415.22 384.85,-673.06 137.83,-548.11 29.17,-1144.68 -351.08,-1542.45 -36.57,-38.24 -17.97,-2.4 -57.29,-56.07zm-1677.68 -170.01l4149.44 0c73.18,6.69 62.77,36.57 60.79,150.01 -21.12,1210.38 97.85,1040.73 -265.58,1040.15l-1303.51 -0.02 0 472.29 1303.5 0 0 850.1 -1303.5 0 0 434.51c476.01,0 1007.35,-22.73 1475.92,-2.41 125.11,5.43 92.25,28.6 92.06,285.77 -0.71,961.05 73.13,870.84 -226.63,869.07l-2210.35 -0.07c-264.66,0 -463.04,-18.89 -717.86,-18.89l0 -1454.63 -906.79 0 0 1171.26c0.08,265.57 33.43,297.71 -62.71,293.28 -500.78,-23.11 -1017.62,-9.91 -1523.92,-9.91l-8.22 -1209.04c14.41,-64.59 103.12,-260.51 159.11,-309.64l0 1348.66c220.4,0 440.8,0 661.2,0 233.39,0 403.58,18.89 623.41,18.89 0,-112.14 -21.77,-1418.12 16.82,-1456.71 70.75,-70.75 1217.63,56.37 1426.66,-46.85 200.78,-99.13 364.69,-313.73 443.31,-520.15 237.24,-622.88 39.3,-1549 -504.13,-1720.36 -106.91,-33.71 -1281.09,-15.3 -1451.07,-15.3l72.05 -170.01z" />
                    <path class="fil1"
                        d="M7716.51 4574.22c-70.7,45.24 -728.55,23.51 -795.36,18.12 -16.33,-104.73 -20.63,-385.96 3.02,-485.06 121.63,-0.74 740.52,-17.53 798.54,13.55l103.53 0c49.43,73.6 102.15,136.32 65.41,272.53 -25.87,95.94 -85.17,157.87 -175.14,180.86zm-948.04 -566.74l0 680.09c0,43.52 13.15,56.67 56.67,56.67l869.01 0c452.51,0 468.73,-793.43 94.45,-793.43l-963.46 0c-43.52,0 -56.67,13.15 -56.67,56.67z" />
                </g>
                <g>
                    <path class="fil1"
                        d="M7125.19 8881.43l0 793.43 151.12 0 0 -547.84c23.33,26.83 1.39,-25.64 28.83,46.73 9.27,24.49 11.83,49.59 17.52,76.94l104.78 424.17 151.14 0 105.35 -461.39c1.66,-6.09 7.04,-23.37 8.99,-28.78 15.31,-42.47 4.54,-17.73 17.9,-38.78l0 528.95 170.02 0 0 -793.43c0,-77.13 -59.22,-56.67 -207.81,-56.67 -71.3,0 -60.75,92.2 -102.03,256.9 -31.83,127 -36.03,234.79 -86.88,272.05 0,-175.54 -99.37,-360.9 -113.35,-528.95 -94.91,0 -245.58,-31.04 -245.58,56.67z" />
                    <path class="fil1"
                        d="M8472.45 9504.84c-131.75,30.7 -125.51,18.9 -283.38,18.9l0 -207.81c103.3,0 387.54,-44.19 283.38,188.91zm-132.24 -340.04l-151.14 0 0 -188.92c68.07,0 223.93,7.54 259.54,45.23 59.66,63.16 -15.08,143.69 -108.4,143.69zm-321.15 510.06c398.32,0 642.3,68.85 642.3,-264.47 0,-118.08 -72.05,-132.56 -113.35,-188.92 68.89,-102.87 75.57,-41.75 75.57,-226.7 0,-44.35 -63.49,-120.23 -107.06,-138.53 -102.88,-43.2 -374.08,-31.48 -497.46,-31.48l0 850.1z" />
                    <path class="fil1"
                        d="M5590.55 8881.43l0 793.43 170.02 0 0 -491.17 150.28 246.44c26.23,45.45 44.47,87.12 72.45,135.35 72.26,124.61 29.27,109.38 230.66,109.38l0 -793.43c0,-71.52 -44.06,-56.67 -151.13,-56.67l0 528.95c-41.87,-30.68 -132.72,-209.79 -163.67,-270.83 -30.49,-60.12 -46.25,-75.8 -75.55,-132.24 -66.71,-128.51 -28.59,-125.88 -176.38,-125.88 -43.54,0 -56.68,13.14 -56.68,56.67z" />
                    <path class="fil1"
                        d="M5186 9183.69l-170.02 0 0 -188.92c236.75,0 283.37,-27.56 283.37,113.35 0,58.08 -55.34,75.57 -113.35,75.57zm-340.04 491.17l170.02 0 0 -340.04c129.87,0 146.32,41.06 195.08,126.08 47.19,82.29 82.01,130.69 126.08,213.96l188.91 0c-18.53,-79.49 -60.61,-134.86 -100.33,-201.93 -22.5,-37.99 -31.29,-56.66 -58.5,-92.63 -30.28,-40.01 -41.97,-44.58 -67.87,-83.26 165.59,-13.78 170.03,-159.06 170.03,-264.48 0,-257.98 -375.31,-207.8 -623.42,-207.8l0 850.1z" />
                    <path class="fil1"
                        d="M1971.32 9523.74l-132.24 0 0 -528.97c192.2,0 302.26,-41.8 302.26,302.27 0,118.72 -50.21,226.7 -170.02,226.7zm-302.27 151.12c364.66,0 642.31,76.29 642.31,-453.39 0,-452 -364.31,-396.71 -642.31,-396.71l0 850.1z" />
                    <path class="fil1"
                        d="M10449.41 9297.04c0,-119.02 -6.46,-321.16 207.8,-321.16 192.9,0 188.92,219.43 188.92,321.16 0,313.27 -396.72,313.27 -396.72,0zm-170.02 -113.35l0 151.13c0,474.34 736.76,474.34 736.76,0l0 -151.13c0,-164.94 -141.77,-358.93 -302.26,-358.93l-113.35 0c-186.65,0 -321.15,175.72 -321.15,358.93z" />
                    <path class="fil1"
                        d="M4127.78 8881.43l0 736.76c0,43.53 13.15,56.67 56.68,56.67l547.84 0 0 -151.12 -434.5 0 0 -207.81c407.26,0 396.72,31.48 396.72,-94.46 0,-149.4 -396.72,36.06 -396.72,-113.35l0 -113.35c451.59,0 415.61,33.06 415.61,-113.34 0,-43.53 -13.15,-56.67 -56.67,-56.67l-472.28 0c-43.53,0 -56.68,13.14 -56.68,56.67z" />
                    <path class="fil1"
                        d="M2426.2 8881.43l0 793.43 585.62 0 0 -151.12 -415.6 0 0 -207.81 377.83 0 0 -151.13 -377.83 0 0 -170.03c451.58,0 415.6,33.06 415.6,-113.34 0,-43.53 -13.14,-56.67 -56.67,-56.67l-472.28 0c-43.53,0 -56.67,13.14 -56.67,56.67z" />
                    <path class="fil1"
                        d="M8770.29 8881.43c0,491.34 -72.55,812.01 339.46,812.32l0.96 0c367.99,-0.31 282.99,-442.41 282.99,-868.99 -233.91,0 -170.02,-14.96 -170.02,642.3 -63.11,42.25 -86.18,87.06 -173.9,61.91 -71.33,-20.46 -109.47,-73.37 -109.47,-156.37l0 -547.84c-121.57,0 -170.02,-16.79 -170.02,56.67z" />
                    <path class="fil1"
                        d="M6650.68 9070.34c67.01,49.09 76.17,186.99 113.35,264.48l-188.91 0c20.73,-88.99 68.01,-173.73 75.56,-264.48zm-358.93 604.52l170.02 0c16.32,-34.02 46.64,-145.84 56.67,-188.91l302.26 0 59.41 188 167.29 0.91c-1.95,-87.51 -109.57,-342.88 -143.86,-441.77 -27.83,-80.26 -54.11,-147.85 -80.43,-221.83 -15.17,-42.62 -24.12,-68.87 -41.22,-109.91 -35.21,-84.48 -23.96,-76.59 -150.1,-76.59 -76.54,0 -144.35,282.46 -186.51,399.12 -32.22,89.16 -146.85,370.66 -153.53,450.98z" />
                    <path class="fil1"
                        d="M3722.35 9202.58l-132.24 0 0 -207.81c225.84,0 245.59,-21.59 245.59,132.25 0,58.07 -55.34,75.56 -113.35,75.56zm-302.25 -321.15l0 793.43 170.01 0 0 -302.26c234.3,0 396.7,-16.08 425.02,-236.62 12.06,-93.87 -15.79,-175.96 -69.09,-232.65 -106.06,-112.8 -319.46,-78.57 -469.27,-78.57 -43.53,0 -56.67,13.14 -56.67,56.67z" />
                    <path class="fil1"
                        d="M9862.31 9693.75c196.96,-0.32 282.52,-120.78 320.4,-283.36 -48.48,-23.26 -102.67,-33.42 -151.14,-56.68 -41.09,85.63 -49.74,179.82 -166.86,178.63 -204.16,-2.08 -173.18,-210.62 -173.18,-348.65 0,-249.47 272.77,-283.25 321.15,-75.57 61.33,-1.36 128.88,-18.04 170.03,-37.78 -94.25,-404.51 -705.96,-314.97 -677.74,205.15 5.87,108.19 40.86,219.91 90.98,287.15 48.87,65.56 151.11,130.81 264.83,131.11l1.53 0z" />
                </g>
                <g>
                    <path class="fil1"
                        d="M2574.29 7426.8l0 831.22c108.16,25.89 39.12,30.49 170.03,0l0 -491.18 79.23 128.58c147.02,246.45 153.33,381.49 317.48,381.49 43.54,0 56.68,-13.14 56.68,-56.68l0 -755.65c0,-64.12 -33.17,-56.67 -94.45,-56.67 -86.11,0 -57.3,134.04 -56.75,226.63 0.59,100.71 0.07,201.59 0.07,302.33 -50.37,-36.91 -124.71,-199.74 -164.01,-270.49 -109.71,-197.56 -128.85,-309.22 -308.28,-239.58z" />
                    <path class="fil1"
                        d="M5968.81 7766.84l-226.7 0 0 -188.91 226.7 0c44.21,0 75.56,31.35 75.56,75.56 0,58.01 -17.49,113.35 -75.56,113.35zm-377.83 -302.26l0 755.65c0,64.13 33.17,56.68 94.46,56.68 137.69,0 -14.16,-358.94 94.46,-358.94 197.94,0 222.24,358.94 358.93,358.94 126.14,0 154.06,8.15 105.72,-82.62l-200.18 -314.1c237.41,-19.76 211.96,-394.74 30.17,-445.78 -84.4,-23.69 -318.69,-26.5 -426.88,-26.5 -43.54,0 -56.68,13.15 -56.68,56.67z" />
                    <path class="fil1"
                        d="M9906.91 8106.89l-188.91 0 0 -528.96c171.18,0 321.15,-40.47 321.15,264.48 0,100.13 -37.56,264.48 -132.24,264.48zm-358.93 -680.09l0 831.22c329.66,76.8 661.19,2.1 661.19,-396.72 0,-158.86 -34.8,-306.52 -142.01,-386.95 -87.63,-65.74 -427.83,-83.01 -519.18,-47.55z" />
                    <path class="fil1"
                        d="M8108.59 8106.89l-188.91 0 0 -528.96 151.13 0c136.73,0 154.99,115.38 159.81,250.39 3.33,93.15 -11.29,278.57 -122.03,278.57zm-358.93 -642.31l0 755.65c0,110.58 309.31,46.16 360.61,39.47 104.75,-13.68 110.63,-9.86 174.43,-71.16 168.63,-162.01 168.6,-529.49 -9.52,-701.63 -88.78,-85.8 -323.38,-79 -468.85,-79 -43.53,0 -56.67,13.15 -56.67,56.67z" />
                    <path class="fil1"
                        d="M10456.98 7464.58l0 755.65c0,43.54 13.14,56.68 56.68,56.68l528.95 0 0 -170.02 -415.61 0 0 -207.81 377.82 0 0 -151.13 -377.82 0 0 -170.02c330.02,0 402.39,15.94 415.61,-35.06l0 -116.07c-164.35,-38.29 -358.09,-18.89 -528.95,-18.89 -43.54,0 -56.68,13.15 -56.68,56.67z" />
                    <path class="fil1"
                        d="M4752.56 7464.58l0 755.65c0,43.54 13.15,56.68 56.67,56.68l472.29 0c73.45,0 56.68,-48.46 56.68,-170.02l-415.62 0 0 -207.81 377.83 0 0 -151.13 -377.83 0 0 -170.02c477.67,0 415.62,33.44 415.62,-151.13 -164.36,-38.29 -358.1,-18.89 -528.97,-18.89 -43.52,0 -56.67,13.15 -56.67,56.67z" />
                    <path class="fil1"
                        d="M6478.39 7615.72c0,363 304.58,202.7 434.5,396.71 -105.15,198.71 -289.03,121.19 -302.26,-37.78 -61.11,0 -136.45,-16.7 -159.34,25.62 -11.3,20.91 17.9,276.64 272.69,276.64 108.79,0 250.39,7.67 321.31,-132.33 37.95,-74.93 38.16,-189.59 0.22,-264.53 -97.49,-192.58 -399.19,-81.31 -415.99,-283.23 92.53,-48.95 232.43,-82.56 245.59,75.57l170.02 0c0,-376 -566.74,-321.47 -566.74,-56.67z" />
                    <path class="fil1"
                        d="M8946.52 7672.39l37.78 0c5.11,61.39 53.09,198.75 75.57,245.58l-188.92 0c22.48,-46.83 70.46,-184.19 75.57,-245.58zm-302.27 604.52c235.7,0 86.36,-207.8 226.7,-207.8l188.92 0c135.91,0 25.3,207.8 207.8,207.8 157.27,0 58.19,-78.92 -54.34,-417.94l-130.62 -360.56c-33.22,-85.78 -22.07,-90.5 -117.3,-90.5 -116.41,0 -112.16,78.84 -144.06,177.09 -30.03,92.49 -54.88,152.67 -85.04,236.11l-130.43 364.96c-14.04,45.65 -34.96,90.84 38.37,90.84z" />
                    <path class="fil1"
                        d="M1680.38 7464.58c0,638.15 -79.87,812.33 377.82,812.33 113.49,0 226.7,-113.21 226.7,-226.69l0 -585.64c0,-64.12 -33.17,-56.67 -94.46,-56.67 -113.32,0 -24.32,298.81 -74.73,605.36 -24.82,150.93 -145.85,122.98 -246.42,74.72 -42.17,-181 -18.89,-448.36 -18.89,-661.19 -55.12,-12.84 -170.02,-55.26 -170.02,37.78z" />
                    <path class="fil1"
                        d="M4159.59 8276.91c160.65,0 139.02,-86.39 252.72,-427.37l111.43 -346.17c27.03,-100.95 1.88,-95.46 -99.67,-95.46 -72.73,0 -97.52,156.93 -132.24,283.37 -20.61,75.06 -59.37,262.71 -113.34,302.26 -6.28,-75.46 -61.79,-221.17 -87.66,-309.07 -69.22,-235.29 -64.23,-276.56 -195.71,-276.56 -95.36,0 -39.96,100.09 -10.97,199.83l154.96 468.5c24.75,74.78 41.37,200.67 120.48,200.67z" />
                    <path class="fil1"
                        d="M7318.97 8258.02c234.82,54.7 170.02,75.35 170.02,-793.44 0,-67.15 -36.81,-56.67 -113.35,-56.67 -79.64,0 -58.71,85.27 -57.33,169.36l0.66 680.75z" />
                    <path class="fil1"
                        d="M3477.48 7464.58l0 755.65c0,93.99 170.02,70.37 170.02,-18.89l0 -717.86c0,-89.26 -170.02,-112.89 -170.02,-18.9z" />
                </g>
            </g>
            <g id="_1788157169296">
                <path class="fil2"
                    d="M5333.21 5877.72c14.41,-64.59 103.12,-260.51 159.11,-309.64l1216.2 -2391.82 72.05 -170.01 -1458.27 0c-20.88,89.6 -146.16,294.61 -201.22,403.28l-1278.49 2386.43c-67.69,128.83 -171.75,256.01 -325.93,297.74 -203.56,55.1 -339.82,-65.73 -348.51,-235.81 -8.11,-158.57 187.75,-509.93 272.99,-652.29 43.73,-73.02 68.21,-126.13 105.13,-197.12l1077.05 -2002.23 -1454.63 0 -226.92 415.37c-159,307.1 -428.16,760.01 -572.65,1052l-233.43 427.77c-311.09,560.14 -677.19,1021.86 -200.52,1662.01 178.66,239.93 478.29,403 806.66,496.84 770.55,220.18 1782.58,-63.22 2275.44,-675.23 29.28,-36.36 52.48,-52.48 81.57,-88.45 88.65,-109.59 158.16,-340.84 234.37,-418.84z" />
                <polygon class="fil2" points="1657.39,8635.84 10989.69,8635.84 10989.69,8465.82 1657.39,8465.82 " />
            </g>
        </g>
    </svg>
    </div>
    <div class="margin border">
        <h2 style="text-align: left; margin-left: 5px;">Saída:</h2>
        <table style="width:100%">
            <tr>
              <th>Fita 1</th>
              <th>Fita 2</th>
              <th>Fita 3</th>
            </tr>
            <tr>
                <div id="btnPassar"></div>
            </tr>
            <tr>
              <td><div id="passo0"></div></td>
              <td><div id="passo1"></div></td>
              <td><div id="passo2"></div></td>
            </tr>
          </table>
    </div>
</body>
<script>
    let entrada = ["", "", ""];
    let terminouFita = [false, false, false];
    let indice = [0,0,0];

    function passarFita(x){
        if (terminouFita[x] == false){
            let passo = document.getElementById(`passo${x}`);
            if (indice[x] > 2){
                passo.innerHTML += `<h1 style="color: green">Aceito</h1></tr>`;
                passo.innerHTML += `<h1 style="color: green">${criarRgb(entrada[x])}</h1></tr>`;
                pintar(x, entrada[x]);
                terminouFita[x] = true;
            } else{
                if (indice[x] == 0){
                    passo.innerHTML += "<tr>";
                }
                let saida = valorSaida(entrada[x][indice[x]]);
                passo.innerHTML += `<p>Ler símbolo ${entrada[x][indice[x]]} - Saída ${saida}</p>`;
                if (saida == null){
                    passo.innerHTML += `<h1 style="color: red">Rejeitado</h1></tr>`;
                    terminouFita[x] = true;
                }
                indice[x]++;  
            }
            
        }
    }

    function pintar(classeId, entrada){
        let classe = document.getElementsByClassName(`fil${classeId}`);
        for (var i = 0; i < classe.length; i++) {
            classe[i].style.fill = criarRgb(entrada);
        }
    }

    function criarRgb(entrada){
        return `rgb(${valorSaida(entrada[0])},${valorSaida(entrada[1])},${valorSaida(entrada[2])})`;
    }

    function valorSaida(entrada){
        let valor;
        if (entrada == "1"){
            valor = 255;
        }else if (entrada == "0"){
            valor = 0;
        }
        return valor;
    }

    function salvar(){
        entrada[0] = document.getElementById("e0").value;
        entrada[1] = document.getElementById("e1").value;
        entrada[2] = document.getElementById("e2").value;
        if (entrada[0].length < 3 || entrada[1].length < 3 || entrada[2].length < 3){
            alert("As entradas devem possuir 3 símbolos.");
        } else{
            let btnPassar = document.getElementById("btnPassar");
            btnPassar.innerHTML += `<button class="margin passBtn" onclick="passarFita(0)">Passar</button>
                                    <button class="margin passBtn" onclick="passarFita(1)">Passar</button>
                                    <button class="margin passBtn" onclick="passarFita(2)">Passar</button>`;
        }
    }

    function limpar(){
        document.getElementById("e0").value = "";
        document.getElementById("e1").value = "";
        document.getElementById("e2").value = "";
        document.getElementById("btnPassar").innerHTML = "";
        document.getElementById("passo0").innerHTML = "";
        document.getElementById("passo1").innerHTML = "";
        document.getElementById("passo2").innerHTML = "";
        terminouFita = [false, false, false];
        indice = [0,0,0];
        pintar(0, "111");
        pintar(1, "001");
        pintar(2, "100");
    }
</script>
</html>
